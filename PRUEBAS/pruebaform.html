<?php
// Configuración de la base de datos
$host = "localhost";  // Dirección del servidor de la base de datos
$user = "root";       // Usuario de la base de datos
$password = "";       // Contraseña del usuario de la base de datos
$dbname = "pisi";     // Nombre de la base de datos

// Conectar a la base de datos
$conn = new mysqli($host, $user, $password, $dbname);

// Verificar si la conexión fue exitosa
if ($conn->connect_error) {
    die("Conexión fallida: " . $conn->connect_error);
}

// Insertar datos en la tabla `alumnos`
if ($_SERVER["REQUEST_METHOD"] == "POST" && isset($_POST["insertar_alumno"])) {
    $matricula = $_POST["matricula_alum"];
    $nombres = $_POST["nombres_alum"];
    $ape_paterno = $_POST["ape_paterno_alum"];
    $ape_materno = $_POST["ape_materno_alum"];
    $edad = $_POST["edad_alum"];
    $sexo = $_POST["sexo"];
    $correo = $_POST["correo_alum"];
    $fe_nacimiento = $_POST["fe_nacimiento_alum"];
    $id_carrera = $_POST["id_carrera"];
    $id_facultad = $_POST["id_facultad"];

    $sql = "INSERT INTO alumnos (matricula_alum, nombres_alum, ape_paterno_alum, ape_materno_alum, edad_alum, sexo, correo_alum, fe_nacimiento_alum, id_carrera, id_facultad) 
            VALUES ('$matricula', '$nombres', '$ape_paterno', '$ape_materno', '$edad', '$sexo', '$correo', '$fe_nacimiento', '$id_carrera', '$id_facultad')";

    if ($conn->query($sql) === TRUE) {
        echo "Alumno insertado correctamente.";
    } else {
        echo "Error al insertar alumno: " . $conn->error;
    }
}

// Insertar datos en la tabla `nutricion`
if ($_SERVER["REQUEST_METHOD"] == "POST" && isset($_POST["insertar_nutricion"])) {
    $id_cuestionario = $_POST["id_cuestionario"];
    $p1 = $_POST["p1"];
    $p5 = $_POST["p5"];
    $p14 = $_POST["p14"];
    $p19 = $_POST["p19"];
    $p26 = $_POST["p26"];
    $p35 = $_POST["p35"];
    $total_nutricion = $_POST["total_nutricion"];
    $saludable = $_POST["saludable"];

    $sql = "INSERT INTO nutricion (id_cuestionario, p1, p5, p14, p19, p26, p35, total_nutricion, saludable) 
            VALUES ('$id_cuestionario', '$p1', '$p5', '$p14', '$p19', '$p26', '$p35', '$total_nutricion', '$saludable')";

    if ($conn->query($sql) === TRUE) {
        echo "Nutrición insertada correctamente.";
    } else {
        echo "Error al insertar nutrición: " . $conn->error;
    }
}

// Insertar datos en la tabla `salud`
if ($_SERVER["REQUEST_METHOD"] == "POST" && isset($_POST["insertar_salud"])) {
    $id_cuestionario = $_POST["id_cuestionario"];
    $p2 = $_POST["p2"];
    $p7 = $_POST["p7"];
    $p15 = $_POST["p15"];
    $p20 = $_POST["p20"];
    $p28 = $_POST["p28"];
    $p32 = $_POST["p32"];
    $p33 = $_POST["p33"];
    $p42 = $_POST["p42"];
    $p43 = $_POST["p43"];
    $p46 = $_POST["p46"];
    $total_salud = $_POST["total_salud"];
    $saludable_salud = $_POST["saludable_salud"];

    $sql = "INSERT INTO salud (id_cuestionario, p2, p7, p15, p20, p28, p32, p33, p42, p43, p46, total_salud, saludable_salud) 
            VALUES ('$id_cuestionario', '$p2', '$p7', '$p15', '$p20', '$p28', '$p32', '$p33', '$p42', '$p43', '$p46', '$total_salud', '$saludable_salud')";

    if ($conn->query($sql) === TRUE) {
        echo "Salud insertada correctamente.";
    } else {
        echo "Error al insertar salud: " . $conn->error;
    }
}

// Insertar datos en la tabla `soporte_interpersonal`
if ($_SERVER["REQUEST_METHOD"] == "POST" && isset($_POST["insertar_soporte"])) {
    $id_cuestionario = $_POST["id_cuestionario"];
    $p10 = $_POST["p10"];
    $p18 = $_POST["p18"];
    $p24 = $_POST["p24"];
    $p25 = $_POST["p25"];
    $p31 = $_POST["p31"];
    $p39 = $_POST["p39"];
    $p47 = $_POST["p47"];
    $total_soporte = $_POST["total_soporte"];
    $saludable_soporte = $_POST["saludable_soporte"];

    $sql = "INSERT INTO soporte_interpersonal (id_cuestionario, p10, p18, p24, p25, p31, p39, p47, total_soporte, saludable_soporte) 
            VALUES ('$id_cuestionario', '$p10', '$p18', '$p24', '$p25', '$p31', '$p39', '$p47', '$total_soporte', '$saludable_soporte')";

    if ($conn->query($sql) === TRUE) {
        echo "Soporte interpersonal insertado correctamente.";
    } else {
        echo "Error al insertar soporte interpersonal: " . $conn->error;
    }
}

?>

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario de Inserción</title>
</head>
<body>
    <h1>Formulario de Inserción de Datos</h1>

    <h2>Insertar Alumno</h2>
    <form method="post">
        Matricula: <input type="text" name="matricula_alum" required><br>
        Nombres: <input type="text" name="nombres_alum" required><br>
        Apellido Paterno: <input type="text" name="ape_paterno_alum" required><br>
        Apellido Materno: <input type="text" name="ape_materno_alum" required><br>
        Edad: <input type="number" name="edad_alum" required><br>
        Sexo: <input type="text" name="sexo" required><br>
        Correo: <input type="email" name="correo_alum" required><br>
        Fecha de Nacimiento: <input type="date" name="fe_nacimiento_alum" required><br>
        ID Carrera: <input type="number" name="id_carrera" required><br>
        ID Facultad: <input type="number" name="id_facultad" required><br>
        <input type="submit" name="insertar_alumno" value="Insertar Alumno">
    </form>

    <h2>Insertar Nutrición</h2>
    <form method="post">
        ID Cuestionario: <input type="number" name="id_cuestionario" required><br>
        P1: <input type="number" name="p1" required><br>
        P5: <input type="number" name="p5" required><br>
        P14: <input type="number" name="p14" required><br>
        P19: <input type="number" name="p19" required><br>
        P26: <input type="number" name="p26" required><br>
        P35: <input type="number" name="p35" required><br>
        Total Nutrición: <input type="number" name="total_nutricion" required><br>
        Saludable: <input type="text" name="saludable" required><br>
        <input type="submit" name="insertar_nutricion" value="Insertar Nutrición">
    </form>

    <h2>Insertar Salud</h2>
    <form method="post">
        ID Cuestionario: <input type="number" name="id_cuestionario" required><br>
        P2: <input type="number" name="p2" required><br>
        P7: <input type="number" name="p7" required><br>
        P15: <input type="number" name="p15" required><br>
        P20: <input type="number" name="p20" required><br>
        P28: <input type="number" name="p28" required><br>
        P32: <input type="number" name="p32" required><br>
        P33: <input type="number" name="p33" required><br>
        P42: <input type="number" name="p42" required><br>
        P43: <input type="number" name="p43" required><br>
        P46: <input type="number" name="p46" required><br>
        Total Salud: <input type="number" name="total_salud" required><br>
        Saludable Salud: <input type="text" name="saludable_salud" required><br>
        <input type="submit" name="insertar_salud" value="Insertar Salud">
    </form>

    <h2>Insertar Soporte Interpersonal</h2>
    <form method="post">
        ID Cuestionario: <input type="number" name="id_cuestionario" required><br>
        P10: <input type="number" name="p10" required><br>
        P18: <input type="number" name="p18" required><br>
        P24: <input type="number" name="p24" required><br>
        P25: <input type="number" name="p25" required><br>
        P31: <input type="number" name="p31" required><br>
        P39: <input type="number" name="p39" required><br>
        P47: <input type="number" name="p47" required><br>
        Total Soporte: <input type="number" name="total_soporte" required><br>
        Saludable Soporte: <input type="text" name="saludable_soporte" required><br>
        <input type="submit" name="insertar_soporte" value="Insertar Soporte Interpersonal">
    </form>

</body>
</html>
